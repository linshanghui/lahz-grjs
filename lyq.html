<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ÁïôË®ÄÂ¢ô</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}
body{background:#f7f7fa;padding:12px;max-width:600px;margin:0 auto}
.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;gap:8px}
.title{font-size:20px;font-weight:600;color:#222}
.btn{padding:8px 12px;border:none;border-radius:10px;font-size:14px;font-weight:500;cursor:pointer;white-space:nowrap}
.btn-primary{background:#409eff;color:#fff}
.btn-danger{background:#f56756;color:#fff}
.publish-card{background:#fff;border-radius:16px;padding:16px;margin-bottom:16px;box-shadow:0 2px 10px rgba(0,0,0,0.05)}
.publish-card input,.publish-card textarea{width:100%;padding:12px 14px;border:1px solid #eee;border-radius:12px;margin-bottom:10px;outline:none;font-size:15px;background:#fafafa;transition:border 0.2s}
.publish-card input:focus,.publish-card textarea:focus{border-color:#409eff}
.nick-preview{font-size:13px;color:#409eff;margin:-5px 0 10px;display:none}
.word-tip{font-size:13px;color:#666;margin:0 0 10px}
.publish-card textarea{min-height:100px;resize:none}
.publish-card button{width:100%;padding:12px;background:#409eff;color:#fff;border:none;border-radius:12px;font-weight:500;cursor:pointer;transition:opacity 0.2s}
.publish-card button:hover{opacity:0.9}
.message-wall{display:flex;flex-direction:column;gap:12px}
.message-item{background:#fff;border-radius:16px;padding:14px;position:relative;box-shadow:0 2px 8px rgba(0,0,0,0.04);display:flex;gap:12px}
.message-item.top{border:1px solid #ffd43b;background:#fffdf5}
.avatar{width:42px;height:42px;border-radius:50%;object-fit:cover;background:#eee;flex-shrink:0}
.msg-right{flex:1}
.name{font-weight:600;font-size:15px;color:#222;margin-bottom:6px;display:flex;align-items:center;gap:6px;flex-wrap:wrap}
.top-tag{background:#FF7D00;color:#fff;font-size:11px;padding:2px 6px;border-radius:4px;font-weight:bold}
.tag-item{font-size:11px;padding:2px 6px;border-radius:4px;font-weight:bold;color:#fff}
.content{font-size:15px;line-height:1.5;color:#333;word-break:break-all}
.qq-time-ip{font-size:12px;color:#999;display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-top:8px}
.admin-actions{position:absolute;top:10px;right:10px;display:none;gap:4px}
.act-del{background:#f56756;width:26px;height:22px;font-size:10px;border:none;border-radius:4px;color:#fff;cursor:pointer}
.act-block{background:#ff9f43;width:26px;height:22px;font-size:10px;border:none;border-radius:4px;color:#fff;cursor:pointer}
.act-top{background:#409eff;width:26px;height:22px;font-size:10px;border:none;border-radius:4px;color:#fff;cursor:pointer}
.act-edit{background:#722ed1;width:26px;height:22px;font-size:10px;border:none;border-radius:4px;color:#fff;cursor:pointer}
.edit-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:none;justify-content:center;align-items:center;z-index:99999}
.edit-box{background:#fff;width:90%;max-width:400px;border-radius:16px;padding:20px}
.edit-box h4{margin-bottom:12px;font-size:16px}
.edit-box input,.edit-box textarea{width:100%;padding:10px;margin-bottom:10px;border:1px solid #eee;border-radius:8px;outline:none}
.edit-btns{display:flex;gap:10px;margin-top:10px}
.edit-btns button{flex:1;padding:10px;border:none;border-radius:8px;cursor:pointer}
.btn-save{background:#409eff;color:#fff}
.btn-cancel{background:#f1f1f1;color:#333}
.backend-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.3);display:none;z-index:9999}
.backend-box{background:#fff;width:100%;height:100%;display:flex;flex-direction:column}
.backend-header{background:#409eff;color:#fff;padding:16px;display:flex;justify-content:space-between;align-items:center}
.backend-close{background:none;border:none;color:#fff;font-size:20px;cursor:pointer}
.backend-body{flex:1;padding:16px;overflow-y:auto;background:#f7f7fa}
.section{background:#fff;border-radius:14px;padding:16px;margin-bottom:14px}
.section h4{margin-bottom:12px;font-size:16px}
.set-row{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}
.set-row span{font-size:14px;color:#555}
.set-row input{padding:10px 12px;border:1px solid #eee;border-radius:10px;font-size:15px;background:#fafafa}
textarea{width:100%;height:100px;padding:12px;border:1px solid #eee;border-radius:10px;font-size:14px;background:#fafafa;resize:none}
.save-btn{width:100%;padding:11px;background:#409eff;color:#fff;border:none;border-radius:10px;margin-top:6px;cursor:pointer}
.black-item{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:#fafafa;border-radius:10px;margin-bottom:8px}
.unblock{background:#409eff;color:#fff;border:none;padding:5px 9px;border-radius:6px;font-size:12px;cursor:pointer}
</style>
</head>
<body>

<div class="header">
  <div class="title">üí¨ ÁïôË®ÄÂ¢ô</div>
  <div>
    <button class="btn btn-primary" onclick="openBackend()">ÁÆ°ÁêÜ</button>
    <button class="btn btn-danger" id="logoutBtn" style="display:none;margin-left:6px" onclick="logoutAdmin()">ÈÄÄÂá∫</button>
  </div>
</div>

<div class="publish-card">
  <input id="qq" placeholder="ËØ∑ËæìÂÖ•QQÂè∑" autocomplete="off">
  <div class="nick-preview" id="nickPreview"></div>
  <div class="word-tip" id="nickWordTip"></div>
  <textarea id="content" placeholder="ÊÉ≥ËØ¥ÁÇπ‰ªÄ‰πà..."></textarea>
  <div class="word-tip" id="contentWordTip"></div>
  <button onclick="postMsg()">ÂèëÂ∏ÉÁïôË®Ä</button>
</div>

<div class="message-wall" id="msgWall"></div>

<script>
// Êú¨Âú∞Ê∞∏‰πÖÂ≠òÂÇ®ÔºåÂà∑Êñ∞‰∏ç‰∏¢Â§±
function loadData(){
  return JSON.parse(localStorage.getItem("msg_list"))||[]
}
function saveData(data){
  localStorage.setItem("msg_list",JSON.stringify(data))
}

let msgList=loadData()
let adminPwd="123456"
let isLogin=false
let lastPost=0
const cooldown=10

function renderMsg(){
  const wall=document.getElementById("msgWall")
  wall.innerHTML=""
  if(msgList.length===0){
    wall.innerHTML="<div style='text-align:center;padding:40px;color:#999'>ÊöÇÊó†ÁïôË®Ä</div>"
    return
  }
  msgList.forEach((item,i)=>{
    const div=document.createElement("div")
    div.className="message-item"
    div.innerHTML=`
      <img class="avatar" src="https://q.qlogo.cn/headimg_dl?dst_uin=${item.qq}&spec=100">
      <div class="msg-right">
        <div class="name">${item.name}</div>
        <div class="content">${item.content}</div>
        <div class="qq-time-ip">QQ: ${item.qq} | ${item.time}</div>
      </div>
    `
    wall.appendChild(div)
  })
}

async function postMsg(){
  const qq=document.getElementById("qq").value.trim()
  const content=document.getElementById("content").value.trim()
  if(!qq||!content){
    alert("ËØ∑Â°´ÂÜôÂÆåÊï¥")
    return
  }
  const now=Date.now()
  if(now-lastPost<cooldown*1000){
    alert("ÂèëË®ÄÂ§™Âø´Âï¶")
    return
  }
  lastPost=now
  const name="ÁΩëÂèã"
  const time=new Date().toLocaleString()
  msgList.unshift({qq,content,name,time})
  saveData(msgList)
  renderMsg()
  document.getElementById("content").value=""
  alert("ÂèëÂ∏ÉÊàêÂäüÔºÅ")
}

function openBackend(){
  const p=prompt("ÁÆ°ÁêÜÂØÜÁ†ÅÔºö")
  if(p===adminPwd){
    isLogin=true
    document.getElementById("logoutBtn").style.display="inline-block"
    alert("ÁôªÂΩïÊàêÂäü")
  }else{
    alert("ÂØÜÁ†ÅÈîôËØØ")
  }
}
function logoutAdmin(){
  isLogin=false
  document.getElementById("logoutBtn").style.display="none"
  alert("Â∑≤ÈÄÄÂá∫")
}

window.onload=function(){
  renderMsg()
}
</script>
</body>
</html>
